# Visual Field - 磁场可视化应用

## 简介

Visual Field 是一个创新的 iOS 应用，用于采集和可视化空间中的磁场信息。该应用结合了设备的磁力计传感器和 ARKit 技术，为用户提供直观的磁场数据采集和 3D 可视化体验。

## 功能特性

### 🧭 磁场数据采集
- **实时磁场监测**：使用设备内置磁力计实时监测磁场强度
- **空间定位**：记录每个数据点的 3D 空间位置
- **高精度测量**：磁场强度精确到微特斯拉 (μT) 级别
- **连续采集**：支持连续采集多个数据点，构建完整的磁场分布图

### 📱 用户界面
- **直观的相机风格操作**：采用类似相机的拍照按钮进行数据采集
- **实时数据显示**：采集过程中实时显示当前磁场强度和分量
- **状态指示**：清晰的视觉反馈显示采集状态和进度
- **暗色主题**：优雅的暗色界面设计，减少视觉疲劳

### 🥽 AR 可视化
- **3D 矢量显示**：将磁场数据以彩色箭头形式在 AR 空间中显示
- **颜色编码**：
  - 🔵 蓝色：弱磁场 (< 30% 强度)
  - 🟢 绿色：中等磁场 (30-70% 强度)  
  - 🔴 红色：强磁场 (> 70% 强度)
- **长度表示强度**：箭头长度直观反映磁场强度大小
- **方向指示**：箭头方向精确显示磁场矢量方向

### 📊 数据分析
- **统计信息**：提供最小值、最大值、平均值等统计数据
- **趋势图表**：磁场强度随时间变化的线性图表
- **分量分析**：X、Y、Z 三个分量的详细分析图表
- **数据详情**：每个数据点的详细信息查看

## 技术架构

### 核心组件

#### 📱 ContentView.swift
- 应用的主界面控制器
- 管理不同视图状态的切换
- 集成数据采集和 AR 可视化功能

#### 🎛️ ControlsView.swift
- 用户交互控制层
- 提供相机风格的采集按钮
- 包含 AR 视图切换、数据分析、清除数据等功能按钮

#### 📊 FieldData.swift
- 磁场数据结构定义
- 数据管理器 (FieldDataManager) 实现
- 负责传感器数据采集和处理
- 支持数据导入导出功能

#### 🥽 ARFieldView.swift
- AR 可视化实现
- 基于 ARKit 和 RealityKit 构建
- 负责将磁场数据转换为 3D 可视化对象

#### 📈 FieldDataAnalysisView.swift
- 数据分析界面
- 提供统计图表和详细数据视图
- 支持 iOS 16+ 的 Charts 框架

### 数据结构

```swift
struct FieldDataPoint {
    let timestamp: Date
    let position: Position        // 3D 空间位置
    let magneticField: MagneticField  // 磁场矢量
}

struct MagneticField {
    let x, y, z: Double          // 磁场分量 (μT)
    var magnitude: Double        // 磁场强度
    var normalized: MagneticField // 归一化矢量
}
```

## 使用方法

### 1. 数据采集
1. 启动应用后，点击底部的圆形采集按钮
2. 移动设备到不同位置进行磁场采集
3. 观察实时显示的磁场强度数据
4. 再次点击按钮停止采集

### 2. AR 可视化
1. 完成数据采集后，点击"查看 AR 可视化"按钮
2. 允许相机权限，进入 AR 模式
3. 在现实空间中查看磁场矢量的 3D 可视化
4. 不同颜色和长度的箭头代表不同强度的磁场

### 3. 数据分析
1. 点击顶部的图表按钮或"数据分析"按钮
2. 查看详细的统计信息和趋势图表
3. 分析磁场强度变化和分量分布
4. 浏览具体数据点的详细信息

## 系统要求

- **iOS 版本**：iOS 15.0 或更高版本
- **设备要求**：
  - 支持 ARKit 的设备 (iPhone 6s 及以上)
  - 内置磁力计传感器
  - 建议使用 iPhone 12 或更新机型以获得最佳体验

## 权限要求

- **相机权限**：AR 可视化功能需要
- **运动传感器权限**：磁场数据采集需要
- **位置权限**：空间定位功能需要（可选）

## 应用场景

### 🔬 科学研究
- 地球磁场分布研究
- 磁场异常检测
- 地质勘探辅助工具

### 🏫 教育教学
- 物理磁学概念演示
- 磁场可视化教学工具
- STEM 教育应用

### 🔧 工程应用
- 电磁干扰检测
- 设备磁场评估
- 工业环境监测

### 🏠 日常应用
- 家庭电器磁场检测
- 磁场污染评估
- 好奇心驱动的探索

## 开发信息

- **开发语言**：Swift
- **UI 框架**：SwiftUI
- **AR 框架**：ARKit + RealityKit
- **传感器**：Core Motion
- **图表**：Swift Charts (iOS 16+)

## 未来扩展

### 🔮 计划功能
- **多传感器支持**：温度、湿度、气压等环境传感器
- **云端同步**：数据云端存储和分享
- **团队协作**：多设备协同采集
- **机器学习**：磁场模式识别和预测
- **导出格式**：支持 CSV、JSON 等格式导出

### 🚀 技术改进
- **更精确的定位**：集成 GPS 和 IMU 数据
- **实时滤波**：噪声过滤和数据平滑
- **性能优化**：更流畅的 AR 渲染
- **电池优化**：低功耗采集模式

## 注意事项

1. **磁场干扰**：请远离强磁场源进行测量
2. **设备校准**：首次使用前建议进行磁力计校准
3. **数据精度**：消费级设备的磁力计精度有限
4. **环境影响**：金属物体会影响测量结果

## 支持与反馈

如果您在使用过程中遇到问题或有改进建议，请通过以下方式联系我们：

- 📧 邮箱：support@visualfield.app
- 🐛 问题报告：GitHub Issues
- 💡 功能建议：GitHub Discussions

---

**Visual Field** - 让看不见的磁场变得可见 🧭✨
